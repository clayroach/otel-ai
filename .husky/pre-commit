echo "ğŸ” Running pre-commit checks..."

# Format all code
echo "ğŸ“ Formatting code..."
pnpm format

# Auto-stage any files that were formatted
echo "ğŸ“¦ Auto-staging formatted files..."
if [ -n "$(git diff --name-only)" ]; then
    git diff --name-only | xargs git add
    echo "   âœ… Formatted files have been auto-staged"
else
    echo "   âœ… No files needed formatting"
fi

# Run type checking for all packages with agent integration
pnpm typecheck:fix

echo "âœ… Pre-commit checks passed!"